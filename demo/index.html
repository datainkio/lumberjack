<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lumberjack Browser Demo</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        background: #1a1a1a;
        color: #e0e0e0;
      }
      h1 {
        color: #60a5fa;
      }
      h2 {
        color: #34d399;
        margin-top: 2rem;
      }
      .demo-section {
        background: #2d2d2d;
        border-radius: 8px;
        padding: 1.5rem;
        margin: 1rem 0;
        border-left: 4px solid #60a5fa;
      }
      button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        margin: 0.5rem 0.5rem 0.5rem 0;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
      }
      button:hover {
        background: #2563eb;
      }
      button:active {
        transform: scale(0.98);
      }
      .note {
        background: #374151;
        padding: 1rem;
        border-radius: 4px;
        margin: 1rem 0;
        border-left: 3px solid #f59e0b;
      }
      code {
        background: #374151;
        padding: 0.2rem 0.4rem;
        border-radius: 3px;
        font-family: "Courier New", monospace;
      }
      pre {
        background: #1f2937;
        padding: 1rem;
        border-radius: 4px;
        overflow-x: auto;
        border: 1px solid #4b5563;
        margin: 1rem 0;
      }
      pre code {
        background: transparent;
        padding: 0;
        font-size: 0.85rem;
        line-height: 1.5;
        color: #e5e7eb;
      }
      .code-section {
        margin-top: 1rem;
        font-size: 0.9rem;
      }
      .code-label {
        color: #9ca3af;
        font-size: 0.8rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
    </style>
  </head>
  <body>
    <h1>ü™ì Lumberjack Browser Demo</h1>

    <div class="note">
      <strong>üìã Important:</strong> Open your browser's DevTools console (F12)
      to see the styled log output. Limiting log spam is a key feature, so make
      sure to <strong style="color: #fbbf24">hit "Enable Logger"</strong>first.
      All other buttons will do nothing until logging is enabled.
    </div>

    <div class="demo-section" style="border-left-color: #fbbf24">
      <h2>‚ö†Ô∏è 1. ENABLE LOGGER FIRST</h2>
      <button
        id="btn-toggle"
        style="background: #fbbf24; font-weight: bold; font-size: 1.1rem"
      >
        üöÄ Enable Logger (Click Me First!)
      </button>
      <button id="btn-basic">Log Standard Message</button>
      <button id="btn-headsup">Log Headsup</button>
      <button id="btn-success">Log Success</button>
      <button id="btn-error-style">Log Error Style</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Toggle logger
lumberjack.enabled = !lumberjack.enabled;

// Standard message
lumberjack.trace("Standard message", sampleData, "brief", "default");

// Headsup (‚ö° amber)
lumberjack.trace("Important notification", { priority: "high" }, "brief", "headsup");

// Success (‚úì green)
lumberjack.trace("Operation completed", { duration: "1.2s" }, "brief", "success");

// Error (‚ùå red)
lumberjack.trace("Something went wrong", { code: 500 }, "brief", "error");</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>2. Data Logging (Brief vs Verbose)</h2>
      <button id="btn-brief">Brief Mode (preview)</button>
      <button id="btn-verbose">Verbose Mode (expanded)</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Brief mode - truncates long arrays/objects
lumberjack.trace("Brief mode (truncates arrays/objects)", sampleData, "brief");

// Verbose mode - expands all data with formatting
lumberjack.trace("Verbose mode (expands all data)", sampleData, "verbose");</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>3. Auto Error Detection</h2>
      <button id="btn-auto-error">Log Caught Error (auto-styles)</button>

      <div class="code-section">
        <div class="code-label">Code Example:</div>
        <pre><code>// Error objects auto-detect and apply 'error' style
try {
  throw new Error("Simulated runtime error");
} catch (err) {
  // No need to specify 'error' style - auto-detected!
  lumberjack.trace("Caught exception (auto-detects Error):", err, "verbose");
}</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>4. Indentation & Grouping</h2>
      <button id="btn-indent">Manual Indent/Outdent</button>
      <button id="btn-group">Grouped Logs (auto-indent)</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Manual indentation
lumberjack.trace("Level 0");
lumberjack.indent();
lumberjack.trace("Level 1 (indented)");
lumberjack.indent();
lumberjack.trace("Level 2 (double indent)");
lumberjack.outdent();
lumberjack.trace("Back to Level 1");
lumberjack.resetIndent();
lumberjack.trace("Reset to Level 0");

// Grouped logs (auto-indent/outdent)
await lumberjack.group(async () => {
  lumberjack.trace("Parent operation started");
  lumberjack.trace("Child operation 1 (auto-indented)");
  lumberjack.trace("Child operation 2 (auto-indented)");
});
lumberjack.trace("After group (indent restored)");</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>5. Scoped Loggers</h2>
      <button id="btn-scoped">Use Scoped Logger</button>
      <button id="btn-scoped-group">Scoped Group</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Create scoped logger with custom prefix and color
const uiLogger = Lumberjack.createScoped("UI", {
  prefix: "üé®",
  color: "#10B981",
});
uiLogger.trace("Component mounted");
uiLogger.trace("State updated", { count: 42 });

// Scoped logger with grouping
const apiLogger = Lumberjack.createScoped("API", {
  prefix: "üåê",
  color: "#F59E0B",
});
await apiLogger.group(async () => {
  apiLogger.trace("Fetching data...");
  apiLogger.trace("Processing response...");
});</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>6. Script Outlines</h2>
      <button id="btn-outline-brief">Show Script Outline (brief)</button>
      <button id="btn-outline-verbose">Show Script Outline (verbose)</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Brief outline - just names and descriptions
lumberjack.showScriptOutline("Deploy Pipeline", [
  { name: "build", description: "Bundle assets" },
  { name: "test", description: "Run test suite" },
  { name: "upload", description: "Deploy to CDN" },
], "brief", "headsup");

// Verbose outline - includes scripts, triggers, dependencies
lumberjack.showScriptOutline("CI/CD Workflow", [
  {
    name: "lint",
    description: "Check code style",
    script: "npm run lint",
    triggers: ["push", "pull_request"],
  },
  {
    name: "build",
    description: "Compile TypeScript",
    script: "tsc --project tsconfig.json",
    dependencies: ["lint"],
  },
  {
    name: "deploy",
    description: "Upload artifacts",
    script: "aws s3 sync dist/ s3://bucket",
    dependencies: ["build"],
    triggers: ["main"],
  },
], "verbose", "headsup");</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>7. Custom Styles</h2>
      <button id="btn-custom-style">Single Purple Message</button>
      <button id="btn-set-default-style">Set Purple as Default Style</button>
      <button id="btn-reset-style">Reset to Standard Style</button>

      <div class="code-section">
        <div class="code-label">Code Examples:</div>
        <pre><code>// Create custom style instance
const purpleStyle = new LumberjackStyle("#9333EA", "üé®");

// Use once for a single message
lumberjack.trace(
  "Single custom purple message (next message will be standard)",
  { theme: "royal" },
  "brief",
  purpleStyle
);

// Pass to multiple calls to use consistently
lumberjack.trace("Purple style message 1", { count: 1 }, "brief", purpleStyle);
lumberjack.trace("Purple style message 2", { count: 2 }, "brief", purpleStyle);
lumberjack.trace("Purple style message 3", { count: 3 }, "brief", purpleStyle);

// Reset to standard style
lumberjack.trace("Back to standard style (gray, no prefix)", 
  { reset: true }, "brief", "standard");</code></pre>
      </div>
    </div>

    <div class="demo-section">
      <h2>8. Configuration</h2>
      <button id="btn-configure">Configure with Prefix</button>

      <div class="code-section">
        <div class="code-label">Code Example:</div>
        <pre><code>// Configure global settings
lumberjack.configure({
  enabled: true,
  prefix: "[APP] ",
});

// Prefix will appear on all subsequent messages
lumberjack.trace("Logger reconfigured with prefix");</code></pre>
      </div>
    </div>

    <script type="module">
      // Import from the src directory
      import lumberjack from "../src/index.js";
      import { Lumberjack } from "../src/Lumberjack.class.js";
      import LumberjackStyle from "../src/LumberjackStyle.js";
      console.log("hi there");
      // Sample data for demos
      const sampleData = {
        user: "alice",
        items: [1, 2, 3, 4, 5, 6, 7, 8],
        config: { theme: "dark", timeout: 5000 },
        nested: { deep: { value: "hello" } },
      };

      // 1. Toggle Logger Enable/Disable
      const toggleBtn = document.getElementById("btn-toggle");

      function updateToggleButton() {
        if (lumberjack.enabled) {
          toggleBtn.textContent = "üü¢ Logger Enabled (Click to Disable)";
          toggleBtn.style.background = "#10b981";
        } else {
          toggleBtn.textContent = "üöÄ Enable Logger (Click Me First!)";
          toggleBtn.style.background = "#fbbf24";
        }
      }

      toggleBtn.addEventListener("click", () => {
        lumberjack.enabled = !lumberjack.enabled;

        if (lumberjack.enabled) {
          lumberjack.trace(
            "‚úÖ Logger enabled! Check console for all subsequent logs."
          );
        } else {
          console.log(
            "%c‚ö†Ô∏è Logger disabled - no more Lumberjack output until re-enabled",
            "color: #F59E0B; font-weight: bold;"
          );
        }

        updateToggleButton();
      });

      // Initialize button state
      updateToggleButton();

      document.getElementById("btn-basic").addEventListener("click", () => {
        lumberjack.trace("Standard message", sampleData, "brief", "standard");
      });

      document.getElementById("btn-headsup").addEventListener("click", () => {
        lumberjack.trace(
          "Important notification",
          { priority: "high" },
          "brief",
          "headsup"
        );
      });

      document.getElementById("btn-success").addEventListener("click", () => {
        lumberjack.trace(
          "Operation completed",
          { duration: "1.2s" },
          "brief",
          "success"
        );
      });

      document
        .getElementById("btn-error-style")
        .addEventListener("click", () => {
          lumberjack.trace(
            "Something went wrong",
            { code: 500 },
            "brief",
            "error"
          );
        });

      // 2. Brief vs Verbose
      document.getElementById("btn-brief").addEventListener("click", () => {
        lumberjack.trace(
          "Brief mode (truncates arrays/objects)",
          sampleData,
          "brief"
        );
      });

      document.getElementById("btn-verbose").addEventListener("click", () => {
        lumberjack.trace(
          "Verbose mode (expands all data)",
          sampleData,
          "verbose"
        );
      });

      // 3. Auto Error Detection
      document
        .getElementById("btn-auto-error")
        .addEventListener("click", () => {
          try {
            throw new Error("Simulated runtime error");
          } catch (err) {
            lumberjack.trace(
              "Caught exception (auto-detects Error):",
              err,
              "verbose"
            );
          }
        });

      // 4. Indentation & Grouping
      document.getElementById("btn-indent").addEventListener("click", () => {
        lumberjack.trace("Level 0");
        lumberjack.indent();
        lumberjack.trace("Level 1 (indented)");
        lumberjack.indent();
        lumberjack.trace("Level 2 (double indent)");
        lumberjack.outdent();
        lumberjack.trace("Back to Level 1");
        lumberjack.resetIndent();
        lumberjack.trace("Reset to Level 0");
      });

      document
        .getElementById("btn-group")
        .addEventListener("click", async () => {
          await lumberjack.group(async () => {
            lumberjack.trace("Parent operation started");
            lumberjack.trace("Child operation 1 (auto-indented)");
            lumberjack.trace("Child operation 2 (auto-indented)");
          });
          lumberjack.trace("After group (indent restored)");
        });

      // 5. Scoped Loggers
      document.getElementById("btn-scoped").addEventListener("click", () => {
        const uiLogger = Lumberjack.createScoped("UI", {
          prefix: "üé®",
          color: "#10B981",
        });
        uiLogger.trace("Component mounted");
        uiLogger.trace("State updated", { count: 42 });
      });

      document
        .getElementById("btn-scoped-group")
        .addEventListener("click", async () => {
          const apiLogger = Lumberjack.createScoped("API", {
            prefix: "üåê",
            color: "#F59E0B",
          });
          await apiLogger.group(async () => {
            apiLogger.trace("Fetching data...");
            apiLogger.trace("Processing response...");
          });
        });

      // 6. Script Outlines
      document
        .getElementById("btn-outline-brief")
        .addEventListener("click", () => {
          lumberjack.showScriptOutline(
            "Deploy Pipeline",
            [
              { name: "build", description: "Bundle assets" },
              { name: "test", description: "Run test suite" },
              { name: "upload", description: "Deploy to CDN" },
            ],
            "brief",
            "headsup"
          );
        });

      document
        .getElementById("btn-outline-verbose")
        .addEventListener("click", () => {
          lumberjack.showScriptOutline(
            "CI/CD Workflow",
            [
              {
                name: "lint",
                description: "Check code style",
                script: "npm run lint",
                triggers: ["push", "pull_request"],
              },
              {
                name: "build",
                description: "Compile TypeScript",
                script: "tsc --project tsconfig.json",
                dependencies: ["lint"],
              },
              {
                name: "deploy",
                description: "Upload artifacts",
                script: "aws s3 sync dist/ s3://bucket",
                dependencies: ["build"],
                triggers: ["main"],
              },
            ],
            "verbose",
            "headsup"
          );
        });

      // 7. Custom Styles
      const purpleStyle = new LumberjackStyle("#9333EA", "üé®");

      document
        .getElementById("btn-custom-style")
        .addEventListener("click", () => {
          lumberjack.trace(
            "Single custom purple message (next message will be standard)",
            { theme: "royal" },
            "brief",
            purpleStyle
          );
        });

      document
        .getElementById("btn-set-default-style")
        .addEventListener("click", () => {
          // Note: Lumberjack doesn't support changing default style via configure
          // So we'll demonstrate by logging multiple messages with the custom style
          lumberjack.trace(
            "Purple style message 1",
            { count: 1 },
            "brief",
            purpleStyle
          );
          lumberjack.trace(
            "Purple style message 2",
            { count: 2 },
            "brief",
            purpleStyle
          );
          lumberjack.trace(
            "Purple style message 3 - pass style to each trace()",
            { count: 3 },
            "brief",
            purpleStyle
          );
          console.log(
            "%c‚ÑπÔ∏è Note: To use custom styles, pass the style parameter to each trace() call",
            "color: #60a5fa; font-style: italic;"
          );
        });

      document
        .getElementById("btn-reset-style")
        .addEventListener("click", () => {
          lumberjack.trace(
            "Back to standard style (gray, no prefix)",
            { reset: true },
            "brief",
            "standard"
          );
        });

      // 8. Configuration
      document.getElementById("btn-configure").addEventListener("click", () => {
        lumberjack.configure({
          enabled: true,
          prefix: "[APP] ",
        });
        lumberjack.trace("Logger reconfigured with prefix");
        updateToggleButton();
      });

      // Initial message
      console.log(
        "%cü™ì Lumberjack Demo Loaded",
        "color: #60a5fa; font-size: 16px; font-weight: bold;"
      );
      console.log(
        "%cClick buttons above to test different features. Logger is disabled by default.",
        "color: #9ca3af;"
      );
    </script>
  </body>
</html>
